<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="action_mx_ped_transportistas" model="ir.actions.act_window">
      <field name="name">Transportistas</field>
      <field name="res_model">res.partner</field>
      <field name="view_mode">list,form</field>
      <field name="domain">[("x_contact_role","=","transportista")]
      </field>
      <field name="context">{"default_x_contact_role": "transportista"}</field>
    </record>

    <menuitem id="menu_mx_ped_transportistas"
              name="Transportistas"
              parent="mx_ped_operacion_menu_root"
              action="action_mx_ped_transportistas"
              sequence="25"/>

    <record id="res_partner_view_form_inherit_mi_modulo_aduana" model="ir.ui.view">
      <field name="name">res.partner.form.inherit.mimodulo_aduana_odoo_modulo.aduana</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//notebook" position="inside">
          <page string="Aduana" name="mi_modulo_aduana_partner">
            <group>
              <group string="Rol">
                <field name="x_contact_role"/>
                <field name="x_rule_engine_strict"/>
                <field name="x_patente_aduanal" invisible="x_contact_role != 'agente_aduanal'"/>
                <field name="x_num_autorizacion_aduanal" invisible="x_contact_role != 'agente_aduanal'"/>
              </group>
              <group string="Identificacion">
                <field name="vat"/>
                <field name="x_curp"/>
                <field name="x_identificacion_fiscal"/>
              </group>
              <group string="Domicilio">
                <field name="x_street_name"/>
                <field name="x_street_number_ext"/>
                <field name="x_street_number_int"/>
                <field name="x_colonia"/>
                <field name="x_municipio"/>
                <field name="x_localidad"/>
                <field name="zip"/>
                <field name="city"/>
                <field name="state_id"/>
                <field name="country_id"/>
                <field name="street"/>
                <field name="street2"/>
              </group>
            </group>
          </page>

          <page string="Documentos" name="mi_modulo_documentos_partner">
            <group string="Documentacion">
              <field name="company_type" invisible="1"/>
              <button name="action_init_document_checklist"
                      type="object"
                      string="Inicializar checklist"
                      class="btn-secondary"/>
              <field name="x_document_line_ids"
                     nolabel="1"
                     domain="[('applies_to', 'in', ['all', company_type])]">
                <list editable="bottom">
                  <field name="sequence" optional="hide"/>
                  <field name="doc_name" string="Documento" readonly="1"/>
                  <field name="is_monthly" string="Mensual" readonly="1"/>
                  <field name="filename" invisible="1"/>
                  <field name="file_data" widget="binary" filename="filename" string="Archivo"/>
                  <field name="status" readonly="1"/>
                  <field name="notes"/>
                </list>
                <form string="Documento">
                  <group col="2">
                    <group>
                      <field name="doc_name" readonly="1"/>
                      <field name="is_monthly" readonly="1"/>
                      <field name="status" readonly="1"/>
                    </group>
                    <group>
                      <field name="filename" invisible="1"/>
                      <field name="file_data" widget="binary" filename="filename" string="Archivo"/>
                      <field name="notes"/>
                    </group>
                  </group>
                </form>
              </field>
              <button name="action_request_missing_documents"
                      type="object"
                      string="Solicitar faltantes por WhatsApp"
                      class="btn-secondary"/>
            </group>
          </page>
        </xpath>
      </field>
    </record>
  </data>
</odoo>
